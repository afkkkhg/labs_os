1. на серверах web1, web2 установливаю Nginx.
2. На серверах haproxy1, haproxy2 установливаю и настроиваю  отказоустойчивую связку HAProxy+Keepalived. Также настраиваю VIP с помощью Keepalived в соответствии со схемой, приложенной к файлу.
3. На серверах web1, web2 Nginx должен работать по порту 8080 и отдавать кастомную страницу, зайдя на которую можно понять на каком сервере мы находимся.
4. На серверах с HAProxy ПО должно обеспечивать балансировку нагрузки серверов web1 и web2 в режиме round-robin и делаю таймауты ожидания ответа web1 и web2,как можно меньше. 
4. Установка и настройка всего ПО должна быть обеспечена Ansible-сценарием.
5. И так я в конфигурационном файле добавляда следующие параметры:
inventory файл, vagrant файл, на значении host_key_checking выставляем False, на значение defualt_transport указываем smart.
6.Далее я создаю inventory файл, с помощью которого будет указано на каких хостах нужно выполнить сценарий ansible. Также указываю ip этих двух серверов и ip балансеров haproxy.
7.В Playbook nginx.yml. Проходит установка nginx на заданной роли машине webserver отключение службы selinux, установка балансировщика нагрузки haproxy и установка вспомогательного балансировщика keepalive.
8.Roles balancer - данная роль- балансер отвечает за распределение нагрузки на веб-ресурсы, используя алгоритмы haproxy и вспомогательного сервиса keepalive, который будет контролировать работу веб-ресуров, а в случае возникновении ошибки на основном балансировщике, будет начинать работу вместо основного.
9.Roles webserver - роль- вебсервер отвечает за настройку веб-сервера nginx на 2-ух серверах с расположенными на них веб-ресурсами.
10.Запуск сценариев:
1.1. убедилась в работоспособности: написав : vagrant status, узнаю о текущем состоянии вирт машины.(vagrant uр)
1.2. запуск плейбука nginх: ansible-playbook haproxy.yml - убеждаюсь в работоспособности, на выводе получаем:nginx : ok=2 changed=0 unreachable=0 failed=0 skipped=0 rescued=0 ignored=0.
11. В итоге получаю: вход на веб-страницы по адресу http://192.168.11.113:8080 (ип балансера). При обновлении страницы - должно происходить заранее прописанное изменение в разметке веб-страницы на одной из страничек для отличия их друг от друга, чтобы убедится в работоспособности балансировщика. 
Для проверки отказоустойчивости нужно отключить один из веб-серверов, тогда haproxy может выстраивать альтернативные пути запрос-ответов серверов.
